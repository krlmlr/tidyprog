```{r 31-remove-all, include = FALSE}
rm(list = ls())
```


## Basics

```{r include = FALSE}
### Basics

```
```{r 31-setup-31-function-r}
library(tidyverse)
library(here)
```


```{r include = FALSE}
## TODO: Split script, don't overwrite!
```
```{r 31-todo-split-script-don-t-overwrite}

```


```{r include = FALSE}
# Important! Please reset the R session before running this script.
# (In RStudio: Session/Restart R)
```
```{r 31-important-please-reset-the-r-session-before-running-this-script}

```

### Designing functions

Create functions for tasks that need to be executed frequently.

```{r include = FALSE}
# Declare a function to hide implementation details
```
```{r 31-declare-a-function-to-hide-implementation-details}
read_weather_data <- function() {
  # Read all files
  berlin <- readxl::read_excel(here("data/weather", "berlin.xlsx"))
  toronto <- readxl::read_excel(here("data/weather", "toronto.xlsx"))
  tel_aviv <- readxl::read_excel(here("data/weather", "tel_aviv.xlsx"))
  zurich <- readxl::read_excel(here("data/weather", "zurich.xlsx"))

  # Create ensemble dataset
  weather_data <- bind_rows(
    berlin = berlin,
    toronto = toronto,
    tel_aviv = tel_aviv,
    zurich = zurich,
    .id = "city_code"
  )

  # Return it
  weather_data
}
```

Display the code of any function by writing its name without the subsequent parentheses:

```{r include = FALSE}
# Functions are first-class objects
```
```{r 31-functions-are-first-class-objects}
read_weather_data
```

Execute the function by adding the parentheses:

```{r include = FALSE}
# Execute like functions exported from packages
```
```{r 31-execute-like-functions-exported-from-packages}
read_weather_data()
```


List `R`-objects in an environment:

```{r include = FALSE}
# Variables are local, execution doesn't change global variables.
# (The effect is only seen when starting R in a fresh session.)
```
```{r 31-variables-are-local-execution-doesn-t-change-global-variables}
ls()
```

Assign function values to a variable:

```{r include = FALSE}
# Assign result to use in further operations
```
```{r 31-assign-result-to-use-in-further-operations}
weather_data <- read_weather_data()
```
