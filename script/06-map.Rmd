```{r 06-remove-all, include = FALSE}
rm(list = ls())
```


## Processing all files {#map}

<details><summary>Click here to make setup code visible</summary>
```{r include = FALSE}
### Processing all files

```
```{r 06-setup-06-map-r}
library(tidyverse)
library(here)

dict <- readxl::read_excel(here("data/cities.xlsx"))

input_files <-
  dict %>%
  select(city_code, weather_filename) %>%
  deframe()
```
</details>

Here we look at how to act on each entry of a list or a vector using `purrr::map()`:

We start with the named vector `input_files` from section ["Indexing"](#indexing).
As just seen, manually choosing just one entry of a vector works like so:

```{r include = FALSE}
# Read a single input file
```
```{r 06-read-a-single-input-file}
readxl::read_excel(here(input_files[[1]]))
```

With `map()`, you can successively work through the whole vector and each time let the same function deal with the respective entry.
The output of `map()` is a (named, if the input vector/list was named) list of the individual results:

```{r include = FALSE}
# Read all input files
```
```{r 06-read-all-input-files}
input_data <-
  map(input_files, ~ readxl::read_excel(here(.)))
```

Let's take a closer look at what we produced:

```{r include = FALSE}
# Analyze the results
```
```{r 06-analyze-the-results}
input_data
input_data[[1]]
names(input_data)
```

`map()` can be included in your pipe in the following way:

```{r include = FALSE}
# Pipe notation
```
```{r 06-pipe-notation}
input_files %>%
  map(~ readxl::read_excel(here(.)))
```
